# 事件驱动，异步处理，监听，回调



Qt 捕获事件的过程是一个精细的机制，它包括以下几个关键步骤：

1. 事件循环

   - Qt 程序运行时，会进入一个事件循环。这个循环是由 `QCoreApplication::exec()` 或 `QApplication::exec()` 函数启动的。
   - 事件循环的主要任务是不断检查是否有新的事件发生，如有，则将这些事件分发到相应的处理函数。
   
2. 事件队列

   - 操作系统检测到用户交互（如鼠标点击、键盘输入）或系统事件（如定时器事件）时，会生成对应的事件对象，并将这些事件对象放入 Qt 的事件队列中。

3. 事件分发

   - 事件循环会从事件队列中取出事件，并根据事件的类型（如鼠标事件、键盘事件等）和目标对象（即哪个控件接收到了事件）来进行分发。

4. 事件处理函数

   - Qt 的控件类（如 `QWidget` 及其子类）为不同类型的事件提供了默认的事件处理函数。例如，`mousePressEvent` 是处理鼠标点击事件的函数。
   - 这些事件处理函数在 Qt 的控件类中是定义为虚函数的，这意味着它们可以在子类中被重写，以实现自定义的事件处理逻辑。
   
5. 重写事件处理函数

   - 当开发者需要在特定控件上实现自定义的事件处理逻辑时，可以通过重写对应的事件处理函数来实现。例如，重写 `mousePressEvent` 函数可以改变鼠标点击事件的行为。

6. 信号与槽机制

   - 除了直接重写事件处理函数外，Qt 还提供了信号与槽机制，允许开发者将某个事件（信号）与特定的处理函数（槽）进行绑定。当事件发生时，绑定的槽函数会被自动调用。

7. 应用层级的事件捕获

   - 在应用层级，Qt 提供了 `QApplication` 类的 `notify` 方法来捕获应用接收到的所有事件。通过从 `QApplication` 类派生自定义的应用类并重写 `notify` 方法，开发者可以捕获并处理应用中的所有事件。